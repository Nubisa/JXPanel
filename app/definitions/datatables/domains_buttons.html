<script type="text/javascript">

    window.addSubdomain = function() {

        var add = function(domain) {
            window.toServer("addSubDomain", { id : domain }, function (param) {
                if (param.err) {
                    utils.jxAddMessage('danger', param.err);
                } else {
                    document.location = 'adddomain.html'
                }
            });
        };

        var ids = utils.jxGetSelection();
        if (ids.length === 1)
            return add(ids[0]);


        window.toServer("getUserDomains", null, function (param) {
            if (!param || param.err)
                return  utils.jxAddMessage('danger', param.err);

            if (!param.res)
                return  utils.jxAddMessage('danger', "{{label.DomainsNone}}");

            param.res = "[" + param.res.join("][") + "]";

            $.SmartMessageBox({
                title : '<i class="fa fa-globe txt-color-orangeDark"></i> {{label.AddSubDomain}}',
                content : "{{label.DomainsSelectForSubdomain}}",
                buttons : "[{{label.No}}][{{label.Yes}}]",
                input : "select",
                options: param.res,
                placeholder : "Select"
            }, function(ButtonPress, selected) {
                if (ButtonPress == "{{label.Yes}}") {

                    if (!selected || selected.indexOf(" ") !== -1)
                        return  utils.jxAddMessage('danger', "{{label.DomainsSelectForSubdomain}}");

                    add(selected);
                }
            });

        });
    };
</script>

<a id="btn_add" data-original-title="{{label.AddDomain}}" class="jxbtn" onclick="document.location = 'adddomain.html';">
    <i class="fa fa-plus"></i><span class="dummy-label">{{label.AddDomain}}</span>
</a>
<a id="btn_add_sub" data-original-title="{{label.AddSubDomain}}" class="jxbtn" onclick="return window.addSubdomain();">
    <i class="fa fa-plus"></i><span class="dummy-label">{{label.AddSubDomain}}</span>
</a>
<a id="btn_remove" data-original-title="{{label.RemoveSelected}}" class="jxbtn" onclick="if (window.jxRemoveRows) window.jxRemoveRows(); return false;">
    <i class="fa fa-trash-o"></i><span class="dummy-label">{{label.RemoveSelected}}</span>
</a>