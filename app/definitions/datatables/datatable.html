<div style="margin-left:-6px;margin-top:0px;">
<span id="buttons" class="jxbuttons">
<i class="fa fa-fw fa-align-justify" style="color: #757a7b;"></i>&nbsp;&nbsp;
{{datatable.buttons}}
</span>
</div>


    {{datatable.myPlan}}

<p id="jxFormMessage"></p>

<table id="dt_basic" class="table table-striped table-bordered table-hover jxTable">

</table>

<!-- PACE LOADER - turn this on if you want ajax loading to show (caution: uses lots of memory on iDevices)-->
<script data-pace-options='{ "restartOnRequestAfter": true }' src="js/plugin/pace/pace.min.js"></script>


<script type="text/javascript">


    var refreshtable = function () {

        /* // DOM Position key index //

         l - Length changing (dropdown)
         f - Filtering input (search)
         t - The Table! (datatable)
         i - Information (records)
         p - Pagination (paging)
         r - pRocessing
         < and > - div elements
         <"#id" and > - div with an id
         <"class" and > - div with a class
         <"#id.class" and > - div with an id and class

         Also see: http://legacy.datatables.net/usage/features
         */

        /* BASIC ;*/

        $('#dt_basic').dataTable();


        /* END BASIC */

        /* COLUMN FILTER  */
        var otable = $('#datatable_fixed_column').DataTable({
            "bFilter": false,
            //"bInfo": false,
            "bLengthChange": false,
            //"bAutoWidth": false,
            //"bPaginate": false,
            //"bStateSave": true // saves sort state using localStorage
            "sDom": "<'dt-toolbar'<'col-xs-6'f><'col-xs-6'<'toolbar'>>r>" +
                    "t" +
                    "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>"

        });

        // custom toolbar
        $("div.toolbar").html('<div class="text-right"><img src="img/logo.png" alt="SmartAdmin" style="width: 111px; margin-top: 3px; margin-right: 10px;"></div>');

        // Apply the filter
        $("#datatable_fixed_column thead th input[type=text]").on('keyup change', function () {

            otable
                    .column($(this).parent().index() + ':visible')
                    .search(this.value)
                    .draw();

        });
        /* END COLUMN FILTER */

        /* COLUMN SHOW - HIDE */
        $('#datatable_col_reorder').dataTable({
            "sDom": "<'dt-toolbar'<'col-xs-6'f><'col-xs-6'C>r>" +
                    "t" +
                    "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>"
        });

        /* END COLUMN SHOW - HIDE */

    };



    window.jxTemplateReadyForjxm = function() {
        jxcore.Call('getTableData', { dt : '{{datatable.name}}' }, function(param) {

            if (param.err) {
                utils.jxAddMessage("danger", param.err);
            } else {
                var table = document.getElementById('dt_basic');
                if (table) table.innerHTML = param.html;

                if (window.jx_langs && window.jx_langs.initializeLangs)
                    window.jx_langs.initializeLangs();
                refreshtable();
            }
        });
    };


    var addMessage = function(errMessage) {
        var msg = errMessage || "OK";
        var type = errMessage ? "danger" : "success";
        utils.jxAddMessage(type, msg);
    };

    window.jxRemoveRows = function(noExtraQuestion) {
        var ids = [];
        $('input:checkbox[id^=jxrow_]:checked').each(function() {
            var id = $(this).attr('id').replace("jxrow_", "");
            ids.push(id);
        });

        if (!ids.length) {
            addMessage("{{label.EmptySelection}}");
            return;
        }

        utils.jxConfirm("<strong><i class='fa fa-trash-o txt-color-orangeDark'></i></strong> {{label.RemoveSelectedQuestion}}", "{{label.RemoveSelectedInfo}}", function(ButtonPressed) {

            var _with = ButtonPressed === "{{label.RemoveWithUserFiles}}";
            var _without = ButtonPressed === "{{label.RemoveWithoutUserFiles}}";
            var _yes = ButtonPressed === "{{label.Yes}}";

            if (_with || _without || _yes) {
                window.toServer('removeFromTableData', { dt : '{{datatable.name}}', ids : ids, with : _with }, function(param) {
                    if (!param.err)
                        location.reload();
                    else
                        addMessage(param.err);
                }, true);
            }
        }, noExtraQuestion ? null : "[{{label.Cancel}}][{{label.RemoveWithoutUserFiles}}][{{label.RemoveWithUserFiles}}]");
    };

    window.jxEditRow = function(id) {
        window.toServer('editTableData', { dt : '{{datatable.name}}', id : id }, function(param) {
            if (!param.err && param.url)
                location = param.url;
            else
                addMessage(param.err);
        }, true);
    };

</script>