<article class="col-xs-{{chart.smallSize}} col-sm-{{chart.mediumSize}} col-md-{{chart.mediumSize}} col-lg-{{chart.mediumSize}}">

    <!-- Widget ID (each widget will need unique ID)-->
    <div class="jarviswidget jarviswidget-color-blue" id="wid-id-{{chart.number}}" data-widget-fullscreenbutton="false" data-widget-editbutton="false" data-widget-deletebutton="false">
        <header>
            <span class="widget-icon"> <i class="fa fa-bar-chart-o"></i> </span>
            <h2>{{chart.title}}</h2>

        </header>

        <!-- widget div-->
        <div>
            <!-- end widget edit box -->

            <!-- widget edit box -->
            <div class="jarviswidget-editbox">
                <!-- This area used as dropdown edit box -->
            </div>

            <!-- widget content -->
            <div id="xwid-id-{{chart.number}}" class="widget-body">

                <canvas id="{{chart.id}}" class="chart"></canvas>

            </div>
            <!-- end widget content -->

        </div>
        <!-- end widget div -->

    </div>
    <!-- end widget -->

</article>


<script>
    var inter{{chart.id}} = setInterval(function(){
        if(typeof $ != 'undefined' && typeof Chart != 'undefined' && typeof jxcore != 'undefinde'){
            if(jxcore.IsConnected){
                clearInterval(inter{{chart.id}});
                setTimeout(function(){
                    render{{chart.id}}();
                },10);
            }
        }
    }, 10);



    var render{{chart.id}} = function() {

        var ctx = document.getElementById("{{chart.id}}");

        var options = {

            ///Boolean - Whether grid lines are shown across the chart
            scaleShowGridLines : true,

            //String - Colour of the grid lines
            scaleGridLineColor : "rgba(0,0,0,.05)",

            //Number - Width of the grid lines
            scaleGridLineWidth : 1,

            //Boolean - Whether the line is curved between points
            bezierCurve : true,

            //Number - Tension of the bezier curve between points
            bezierCurveTension : 0.4,

            //Boolean - Whether to show a dot for each point
            pointDot : true,

            //Number - Radius of each point dot in pixels
            pointDotRadius : 4,

            //Number - Pixel width of point dot stroke
            pointDotStrokeWidth : 1,

            //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
            pointHitDetectionRadius : 20,

            //Boolean - Whether to show a stroke for datasets
            datasetStroke : true,

            //Number - Pixel width of dataset stroke
            datasetStrokeWidth : 2,

            //Boolean - Whether to fill the dataset with a colour
            datasetFill : true,

            //String - A legend template
            legendTemplate : "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].lineColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>"

        };

        jxcore.Call("getChartData", {chartName:"{{chart.id}}"}, function(ret_val){
            if(ret_val.err){
                alert(ret_val.err);
                location.href = "/index.html";
            }

            var cbody = document.getElementById('xwid-id-{{chart.number}}');

            ctx.width = cbody.clientWidth - 20;
            ctx.height = cbody.clientHeight - 10;

            var myLineChart_{{chart.id}} = new Chart(ctx.getContext("2d")).Line(ret_val.data, options);

            utils.addEvent(cbody, 'resize', function(){
                document.title = (ctx.style.width + " - " + ctx.style.height);
                ctx.style.width = cbody.clientWidth + "px";
                ctx.style.height = cbody.clientHeight + "px";
                myLineChart_{{chart.id}}.update();
            });
        });

    };
</script>