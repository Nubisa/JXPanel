<!DOCTYPE html>
<html lang="en-us" id="extr-page">
	<head>
    {{view.header}} {{toSub.pageTitle:Dashboard}}
	</head>
	<body>

    <div id='panel-main'>

        <header id="header">
            <div id="logo-group">
                <span id="logo"> <img src="img/logo.png" alt="{{defaults.panelName}}"> </span>
            </div>
        </header>

        <div class="dark-back">
            <div id="content" class="container dark-back">

                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-7 col-lg-8 hidden-xs hidden-sm">
                        <!--<h1 class="txt-color-blue login-header-big">{{defaults.panelName}}</h1>-->
                        <div class="hero">

                            Later...

                        </div>

                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                <h5 class="about-heading">{{label.BlockLeftHeader}}</h5>
                                <p>{{label.BlockLeftBody}}</p>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                <h5 class="about-heading">{{label.BlockRightHeader}}</h5>
                                <p>{{label.BlockRightBody}}</p>
                            </div>
                        </div>

                    </div>
                    <div class="col-xs-12 col-sm-12 col-md-5 col-lg-4">
                        <div class="well no-padding">
                            <form id="login-form" class="smart-form client-form" method="post">
                                <header>
                                    {{label.SignIn}}
                                </header>

                                <fieldset>

                                    <section>
                                        <label class="label">{{label.Username}}</label>
                                        <label class="input"> <i class="icon-append fa fa-user"></i>
                                            <input type="text" id="username{{utils.dateNow}}" name="username">
                                            <b class="tooltip tooltip-top-right"><i class="fa fa-user txt-color-teal"></i> {{label.UsernameEnter}}</b></label>
                                    </section>

                                    <section>
                                        <label class="label">{{label.Password}}</label>
                                        <label class="input"> <i class="icon-append fa fa-lock"></i>
                                            <input type="password" id="password{{utils.dateNow}}" name="password">
                                            <b class="tooltip tooltip-top-right"><i class="fa fa-lock txt-color-teal"></i> {{label.PasswordEnter}}</b> </label>
                                        <div class="note">
                                            <a href="../__htmls/forgotpassword.html">{{label.PasswordForgot}}</a>
                                        </div>
                                        <span id="notify">

                                        </span>
                                    </section>

                                </fieldset>
                                <footer>
                                    <button id="btnSubmit" type="submit" class="btn btn-primary" disabled>
                                        {{label.SignIn}}
                                    </button>
                                </footer>
                            </form>

                        </div>

                    </div>
                </div>
            </div>
        </div>


    </div>




		<!--================================================== -->	

        <script>
            window.jxTemplateReadyForjxm = function() {
                document.getElementById("btnSubmit").disabled = null;
            };
        </script>

		<script type="text/javascript">

            window.jxTemplateReady = function() {
                //runAllForms();

                $(function() {
                    // Validation
                    $("#login-form").validate({
                        // Rules for form validation
                        rules : {
                            username : {
                                required : true
                            },
                            password : {
                                required : true,
                                minlength : 4,
                                maxlength : 64
                            }
                        },
                        messages : {
                            username : {
                                required : '{{label.UsernameEnterRequired}}'
                            },
                            password : {
                                required : '{{label.PasswordEnterRequired}}'
                            }
                        },
                        errorPlacement : function(error, element) {
                            error.insertAfter(element.parent());
                        }
                    });
                    $("#login-form").submit(function(e){
                        document.getElementById("btnSubmit").disabled = "disabled";
                        var uname = document.getElementById("username{{utils.dateNow}}").value;
                        var pwd = document.getElementById("password{{utils.dateNow}}").value;
                        if(!jxcore.IsConnected){
                            location.reload();
                        }else{
                            setTimeout(function(){
                                window.toServer("tryLogin", {username:uname, password:pwd, lang:"EN", url:location.href}, function(result){

                                    if(result.err){
                                        document.getElementById('notify').innerHTML =
                                                '<div class="note">'
                                                        +'<span style="color:red">' + result.err + '</span>'
                                        '</div>';

                                        document.getElementById("btnSubmit").disabled = null;
                                    }else{
                                        location.href = result.url;
                                    }
                                }, true);
                            }, 100);
                        }
                        return false;
                    });
                });
            };
		</script>

    {{view.includes}}

	</body>
</html>