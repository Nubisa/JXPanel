<!-- widget grid -->
<!--<section id="widget-grid" class="">-->

    <!-- row -->
    <!--<div class="row">-->

        <!-- NEW WIDGET START -->
        <!--<article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">-->

            <!-- Widget ID (each widget will need unique ID)-->
            <div class="jarviswidget jarviswidget-color-darken" id="wid-id-{{datatable.name}}" data-widget-editbutton="false">
                <!-- widget options:
                                                usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                                                data-widget-colorbutton="false"
                                                data-widget-editbutton="false"
                                                data-widget-togglebutton="false"
                                                data-widget-deletebutton="false"
                                                data-widget-fullscreenbutton="false"
                                                data-widget-custombutton="false"
                                                data-widget-collapsed="true"
                                                data-widget-sortable="false"

                                                -->
                <header role="heading">
                    <span class="widget-icon"> <i class="fa fa-table"></i> </span>

                    <h2>{{datatable.name}}</h2>

                </header>

                <!-- widget div-->
                <div role="content">

                    <!-- widget edit box -->
                    <div class="jarviswidget-editbox">
                        <!-- This area used as dropdown edit box -->

                    </div>
                    <!-- end widget edit box -->

                    <!-- widget content -->
                    <div class="widget-body no-padding">

                        <div class="widget-body-toolbar">
                                {{datatable.buttons}}
                        </div>

                        <!--<div class="row">-->
                            <table id="dt_basic" class="table table-striped table-bordered table-hover jxTable" width="100%">
                                {{datatable.contents}}
                            </table>
                        <!--</div>-->
                    </div>
                    <!-- end widget content -->

                </div>
                <!-- end widget div -->

            </div>
            <!-- end widget -->

        <!--</article>-->
        <!-- WIDGET END -->

    <!--</div>-->

    <!-- end row -->

    <!-- end row -->

<!--</section>-->
<!-- end widget grid -->

<!-- PACE LOADER - turn this on if you want ajax loading to show (caution: uses lots of memory on iDevices)-->
<script data-pace-options='{ "restartOnRequestAfter": true }' src="js/plugin/pace/pace.min.js"></script>


<script type="text/javascript">


    var refreshtable = function () {

        /* // DOM Position key index //

         l - Length changing (dropdown)
         f - Filtering input (search)
         t - The Table! (datatable)
         i - Information (records)
         p - Pagination (paging)
         r - pRocessing
         < and > - div elements
         <"#id" and > - div with an id
         <"class" and > - div with a class
         <"#id.class" and > - div with an id and class

         Also see: http://legacy.datatables.net/usage/features
         */

        /* BASIC ;*/

        $('#dt_basic').dataTable();


        /* END BASIC */

        /* COLUMN FILTER  */
        var otable = $('#datatable_fixed_column').DataTable({
            "bFilter": false,
            //"bInfo": false,
            "bLengthChange": false,
            //"bAutoWidth": false,
            //"bPaginate": false,
            //"bStateSave": true // saves sort state using localStorage
            "sDom": "<'dt-toolbar'<'col-xs-6'f><'col-xs-6'<'toolbar'>>r>" +
                    "t" +
                    "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>"

        });

        // custom toolbar
        $("div.toolbar").html('<div class="text-right"><img src="img/logo.png" alt="SmartAdmin" style="width: 111px; margin-top: 3px; margin-right: 10px;"></div>');

        // Apply the filter
        $("#datatable_fixed_column thead th input[type=text]").on('keyup change', function () {

            otable
                    .column($(this).parent().index() + ':visible')
                    .search(this.value)
                    .draw();

        });
        /* END COLUMN FILTER */

        /* COLUMN SHOW - HIDE */
        $('#datatable_col_reorder').dataTable({
            "sDom": "<'dt-toolbar'<'col-xs-6'f><'col-xs-6'C>r>" +
                    "t" +
                    "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>"
        });

        /* END COLUMN SHOW - HIDE */

        /* TABLETOOLS */
//        $('#datatable_tabletools').dataTable({
//
//            // Tabletools options:
//            //   https://datatables.net/extensions/tabletools/button_options
//            "sDom": "<'dt-toolbar'<'col-xs-6'f><'col-xs-6'T>r>" +
//                    "t" +
//                    "<'dt-toolbar-footer'<'col-xs-6'i><'col-xs-6'p>>",
//            "oTableTools": {
//                "aButtons": [
//                    "copy",
//                    "csv",
//                    "xls",
//                    {
//                        "sExtends": "pdf",
//                        "sTitle": "SmartAdmin_PDF",
//                        "sPdfMessage": "SmartAdmin PDF Export",
//                        "sPdfSize": "letter"
//                    },
//                    {
//                        "sExtends": "print",
//                        "sMessage": "Generated by SmartAdmin <i>(press Esc to close)</i>"
//                    }
//                ],
//                "sSwfPath": "js/plugin/datatables/swf/copy_csv_xls_pdf.swf"
//            }
//        });

        /* END TABLETOOLS */



    };


    window.jxTemplateReadyForjxm = function() {
        jxcore.Call('getTableData', { dt : '{{datatable.name}}' }, function(param) {

            if (param.err) {
                utils.jxAddMessage("danger", param.err);
            } else {
                var table = document.getElementById('dt_basic');
                if (table) table.innerHTML = param.html;

                refreshtable();
            }
        });
    };


    var addMessage = function(errMessage) {
        var msg = errMessage || "OK";
        var type = errMessage ? "danger" : "success";
        utils.jxAddMessage(type, msg);
    };

    window.jxRemoveRows = function(buttons) {
        var ids = [];
        $('input:checkbox[id^=jxrow_]:checked').each(function() {
            var id = $(this).attr('id').replace("jxrow_", "");
            ids.push(id);
        });

        if (!ids.length) {
            addMessage("{{label.EmptySelection}}");
            return;
        }

        utils.jxConfirm("{{label.RemoveSelectedQuestion}}", "{{label.RemoveSelectedInfo}}", function(ButtonPressed) {

            if (ButtonPressed === "Yes") {
                window.toServer('removeFromTableData', { dt : '{{datatable.name}}', ids : ids }, function(param) {
                    if (!param.err)
                        location.reload();
                    else
                        addMessage(param.err);
                }, true);
            }
        });
    };

    window.jxRemoveDomains = function() {
        var ids = [];
        $('input:checkbox[id^=jxrow_]:checked').each(function() {
            var id = $(this).attr('id').replace("jxrow_", "");
            ids.push(id);
        });

        if (!ids.length) {
            addMessage("{{label.EmptySelection}}");
            return;
        }

        utils.jxConfirm("{{label.RemoveSelectedQuestion}}", "{{label.RemoveSelectedInfo}}", function(ButtonPressed) {

            var _with = ButtonPressed === "{{label.RemoveWithUserFiles}}";
            var _without = ButtonPressed === "{{label.RemoveWithoutUserFiles}}";


            if (_with || _without) {
                window.toServer('removeFromTableData', { dt : '{{datatable.name}}', ids : ids, with : _with || _without }, function(param) {
                    if (!param.err)
                        location.reload();
                    else
                        addMessage(param.err);
                }, true);
            }
        }, "[{{label.Cancel}}][{{label.DomainRemoveWithoutUserFiles}}][{{label.DomainRemoveWithUserFiles}}]");
    };

    window.jxEditRow = function(id) {
        window.toServer('editTableData', { dt : '{{datatable.name}}', id : id }, function(param) {
            if (!param.err && param.url)
                location = param.url;
            else
                addMessage(param.err);
        }, true);
    };

</script>